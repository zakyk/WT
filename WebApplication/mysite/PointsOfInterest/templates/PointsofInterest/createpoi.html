<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Vytvoriť bod</title>
<link href="/static/style.css" rel="stylesheet" type="text/css">



<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCC5vyrqbcCQRVny8dQP5KhGq3W96kkfcU&sensor=false"></script>

	<script type="text/javascript">

		var map;
		var marker;
		
		
		function initialize() {
			var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
			var mapOptions = {
				zoom: 10,
				center: myLatlng
			};
			map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
			
			google.maps.event.addListener(map, 'click', function(event) {
				placeMarker(event.latLng); });
			}

		function placeMarker(location) {
			if (marker) {
				marker.setPosition(location);
			}
			else {
				marker = new google.maps.Marker({
					position: location,
					map: map,
					draggable: false,
					title: "Nový bod"
				});
			}
			map.setCenter(location);

			var formlat = document.getElementById("id_latitude");
			var formlng = document.getElementById("id_longitude");
			formlat.value = marker.getPosition().lat();
			formlng.value = marker.getPosition().lng();
		}

		google.maps.event.addDomListener(window, 'load', initialize);

	</script>
	
</head>

<body>

<div class="container">

  <div class="header"></div>
  
	<div class="menu_div">
		<table class="menu_table">
			<tr class="menu makeborder">
				<td><a href="{% url 'PointsOfInterest:index' %}">Domov</a></td>
				<td><a href="{% url 'PointsOfInterest:friends' %}">Priatelia</a></td>
				<td><a href="{% url 'PointsOfInterest:places' 1 %}">Moje miesta</a></td>
				<td><a href="{% url 'PointsOfInterest:settings' %}">Nastavenie</a></td>
			</tr>
		</table>
	</div>
			
	<div class="content makeborder makeshadow">
		<div id="map-canvas" class="createpoi_map fltrt"></div>
		<div width="auto">
			<div align="center"><h2>Vytvoriť nový bod</h2></div>
			<div style="padding:0px 20px;">
				<form action="{% url 'PointsOfInterest:createpoi' %}" method="post">{% csrf_token %}

					{{ form.non_field_errors }}
					<div class="fieldWrapper">
						{{ form.title.errors }}
						<label for="id_title">Názov bodu:</label><br>
						{{ form.title }}
					</div>
					<div class="fieldWrapper">
						{{ form.description.errors }}
						<label for="id_description">Popis bodu:</label>
					</div>
					<div>
						{{ form.description }}
					</div>
					<div id="map_latitude" class="fieldWrapper">
						{{ form.latitude }}
					</div>
					<div id="map_longitude" class="fieldWrapper">
						{{ form.longitude }}
					</div>
					<p><input type="submit" value="Vytvoriť tento bod" /></p>
				</form>
			</div>
		<div class="clearfloat"></div>
		</div>
	</div>

	<div class="footer"></div>
</div>

</body>
</html>
